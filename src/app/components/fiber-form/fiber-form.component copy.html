
<mat-tab-group mat-align-tabs="center">
  <mat-tab label="Fiber Service Request Form">
    <img *ngIf="param1" src="../../../assets/image/pdf.png" width="58" height="58" class="pdfbtn" matTooltip="convert to pdf" (click)="convetToPDF()">
    <!-- <button class="pdfbtn" (click)="convetToPDF()">convert to pdf</button> -->
    <div id="contentToConvert" #contentTopdf style="font-family: Amiri-Regular">
 <!-- <mat-card id="dd"   class="example-card"> -->
 <mat-card  id="contentToConvert0"  class="example-card">
  <form [formGroup]="form" class="normal-form" (submit)="onSubmit()">

    <mat-form-field [hidden]="true">
      <input matInput type="number" [ngModel]="2" formControlName="serviceTypeID">
  </mat-form-field>
  <!-- <mat-divider *ngIf="param1"></mat-divider> -->
  <mat-card-header class="mb-5">
    <mat-card-title>
      <img src="../../../assets/image/iso.PNG" class="d-inline-block iso"  width="8%" height="65">
      <img src="../../../assets/image/mini_logo.png" class="d-inline-block mt-2" width="65" height="80">
      <img src="../../../assets/image/slogan.PNG" class="d-inline-block iso float-right mt-3" width="20%" height="45">
      <div class="text-center d-inline-block" style="width: 100%;">
        <span class="ar" >طلب شبكات الاتاحة على الفيبر</span>
        <br>
        <span class="eng"> Fiber Service Request Form</span>
      </div>
    </mat-card-title>
</mat-card-header>
<mat-grid-list cols="5" rowHeight="150px" class="mx-3">
  <mat-grid-tile>
    <div class="controles-container">
      <mat-label> Name of Sales Manager :</mat-label>
      <mat-label> Contact:</mat-label>

      </div>
      </mat-grid-tile>

      <mat-grid-tile   colspan="3">
        <div class="controles-container pt-4">
          <mat-form-field>
            <input formControlName="managerName" matInput [readonly]="isReadonly">
            <mat-error>This field is mandatory.</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input formControlName="Contact" matInput [readonly]="isReadonly">
            <mat-error>This field is mandatory.</mat-error>
          </mat-form-field>
          </div>
          </mat-grid-tile>

      <mat-grid-tile>
        <div class="controles-container">

          <mat-label class="text-right"> : اسم مدير المبيعات</mat-label>
      <mat-label class="text-right"> : بيانات الاتصال  </mat-label>
      </div>
      </mat-grid-tile>
      </mat-grid-list>

      <mat-card class="example-card">
        <mat-card-header>
            <mat-card-title>
                Customer Information
                <span class="float-right"> بيانات العميل</span>
                </mat-card-title>
                </mat-card-header>
                <!-- <mat-divider></mat-divider> -->
              <mat-grid-list cols="5" rowHeight="300px" class="mx-3">

                <mat-grid-tile >
                  <div class="controles-container">
                    <input type="hidden" formControlName="$key">

                    <mat-label>Company Name :</mat-label>

                      <mat-label>Contact Name :</mat-label>

                      <mat-label>Email :</mat-label>
                      <mat-label>Mobile :</mat-label>
                      <mat-label>Other Information :</mat-label>


                  </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="3" >
                  <div class="controles-container">
                    <mat-form-field>
                        <input formControlName="CompanyName" matInput [readonly]="isReadonly">
                        <mat-error>This field is mandatory  in <strong>Arabic</strong>.</mat-error>
                      </mat-form-field>
                      <mat-form-field>
                        <input formControlName="ContactName" matInput [readonly]="isReadonly">
                        <mat-error>This field is mandatory in <strong>Arabic</strong>.</mat-error>
                      </mat-form-field>
                      <mat-form-field>
                        <input formControlName="Email" matInput [readonly]="isReadonly">
                        <mat-error>Invalid email address.</mat-error>
                      </mat-form-field>
                      <mat-form-field>

                        <input formControlName="Mobile" matInput [readonly]="isReadonly">
                        <mat-error *ngIf="form.controls.Mobile.errors?.required">This field is mandatory.</mat-error>
                        <mat-error *ngIf="form.controls.Mobile.errors?.minlength">Minimum 11 charactors needed.</mat-error>
                        <mat-error *ngIf="form.controls.Mobile.errors?.pattern">Numbers only.</mat-error>
                      </mat-form-field>
                      <mat-form-field>

                        <textarea formControlName="OtherInformation"  matInput [readonly]="isReadonly">
                          </textarea>
                      </mat-form-field>
                  </div>
                </mat-grid-tile>
                <mat-grid-tile>
                  <div class="controles-container">

                    <mat-label class="text-right">:  اسم الشركة بالسجل التجاري </mat-label>

                      <mat-label class="text-right">:  الاسم </mat-label>

                      <mat-label class="text-right">: البريد الالكتروني</mat-label>
                      <mat-label class="text-right">:  الموبايل </mat-label>

                     <mat-label class="text-right"> : بيانات اخرى </mat-label>




                  </div>
                </mat-grid-tile>

              </mat-grid-list>
              </mat-card>
              <mat-card class="example-card">
                <mat-card-header>
                    <mat-card-title>
                        Requested Service Data
                        <span class="float-right"> بيانات الخدمة المطلوبه</span>

                        </mat-card-title>
                        </mat-card-header>

            <mat-grid-list cols="5" rowHeight="310px" class="mx-3">
              <mat-grid-tile >
                <div class="controles-container">
                  <mat-label class="mb-4">Requested Service / Speed :</mat-label>


                    <mat-label>Number of Circuits :</mat-label>

                    <mat-label>Full Address :</mat-label>
                    <mat-label>Exchange Name :</mat-label>

                    <mat-label>Nearest Fixed Line Number :</mat-label>

                    <mat-label>Expected Upgrades :</mat-label>

                  </div>
                  </mat-grid-tile>
                  <mat-grid-tile colspan="3" >
                    <div class="controles-container" style="padding-top: 3%;">


                      <!-- <section class="example-section d-flex">
                       <div *ngFor="let item of serviceSpeedList">
                         {{item.value}}
                       </div>
                        <p class="mb-0"><mat-checkbox formControlName="E1" >E1</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="E3" >E3</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="DS3" >DS3</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="STM1" >STM1</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="STM4" >STM4</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="STM16" >STM16</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="Ethernet">Ethernet</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="IPLC" >IPLC-دولي</mat-checkbox></p>
                        <p class="mb-0"><mat-checkbox formControlName="DOMESTIC">DOMESTIC-دائره محليه</mat-checkbox></p>

                      </section> -->
                      <mat-radio-group   aria-label="Select an option" formControlName="serviceSpeedID"  [disabled]="isReadonly">
                        <mat-radio-button *ngFor="let choice of serviceSpeedList" [value]=choice.id >{{choice.value}}</mat-radio-button>

                      </mat-radio-group>
                      <mat-error *ngIf="form.controls.serviceSpeedID.errors?.required">This speed is mandatory.</mat-error>

                      <mat-form-field>

                        <input type="number" formControlName="NumberofCircuits" matInput [readonly]="isReadonly">
                        <mat-error>This field is mandatory.</mat-error>
                      </mat-form-field>
                      <mat-form-field>

                        <input formControlName="FullAddress" matInput [readonly]="isReadonly">
                        <mat-error>This field is mandatory in <strong>Arabic</strong>.</mat-error>
                      </mat-form-field>
                      <mat-form-field>

                        <input formControlName="ExchangeName" matInput [readonly]="isReadonly">

                      </mat-form-field>
                      <mat-form-field>

                        <input formControlName="NearestFixedLineNumber" matInput [readonly]="isReadonly">
                        <mat-error>This field is mandatory.</mat-error>
                      </mat-form-field>
                      <mat-form-field>

                        <input formControlName="ExpectedUpgrades" matInput [readonly]="isReadonly">
                        <mat-error>This field is mandatory.</mat-error>
                      </mat-form-field>
                      </div>
                      </mat-grid-tile>
                  <mat-grid-tile >
                    <div class="controles-container">

                      <mat-label class="text-right mb-3">: السرعة المطلوبة </mat-label>
                      <mat-label class="text-right mb-2">:  عدد الدوائر </mat-label>
                      <mat-label class="text-right">:  عنوان الخدمة </mat-label>
                    <mat-label class="text-right">: اسم السنترال </mat-label>

                    <mat-label class="text-right mb-1">: اقرب تليفون </mat-label>

                    <mat-label class="text-right">: الترقية المتوقعة</mat-label>




                  </div>
                  </mat-grid-tile>
                  <mat-grid-tile colspan="5" >


                      <div class="feed w-100 p-2">
                        <mat-label class="inquire">  (ملاحظات ( رجاء كتابة أي ملاحظات أو أستفسارات</mat-label>
                      <!-- <mat-label class="d-block">Contract Period  </mat-label> -->
                <div class="w-50 d-inline-block">
                  <div class="add-bottom-padding">
                    <mat-label class="radio-group-label">Contract Period: </mat-label>
                    <mat-form-field class="example-section d-inline-block pl-2" >
                      <input formControlName="contractPeriod" matInput [readonly]="isReadonly" >


                    </mat-form-field>
                    </div>
                      <div class="add-bottom-padding">
                        <mat-label class="radio-group-label">Circuit Protection : </mat-label>
                        <!-- <mat-radio-group   formControlName="CircuitProtection">
                          <mat-radio-button [value]=true>Yes</mat-radio-button>
                          <mat-radio-button [value]=false>No</mat-radio-button>
                        </mat-radio-group> -->
                        <section class="example-section d-inline-block pl-2 mt-1"  >
                          <mat-radio-group   formControlName="CircuitProtection"  [disabled]="isReadonly">
                            <mat-radio-button [value]=true>Yes</mat-radio-button>
                            <mat-radio-button [value]=false>No</mat-radio-button>
                          </mat-radio-group>
                          <!-- <mat-checkbox  value="true">Yes</mat-checkbox>
                          <mat-checkbox  value="false">No</mat-checkbox> -->

                         </section>
                      </div>
                      <div class="add-bottom-padding">
                        <mat-label class="radio-group-label">Path Protection : </mat-label>
                        <!-- <mat-radio-group   formControlName="PathProtection">
                          <mat-radio-button [value]=true>Yes</mat-radio-button>
                          <mat-radio-button [value]=false>No</mat-radio-button>
                        </mat-radio-group> -->
                        <section class="example-section d-inline-block pl-4 "   >
                          <mat-radio-group   formControlName="PathProtection"  [disabled]="isReadonly">
                            <mat-radio-button [value]=true>Yes</mat-radio-button>
                            <mat-radio-button [value]=false>No</mat-radio-button>
                          </mat-radio-group>
                         <!-- <mat-checkbox  value="true">Yes</mat-checkbox>
                         <mat-checkbox  value="false">No</mat-checkbox> -->

                        </section>
                      </div>
                      <div class="add-bottom-padding">
                        <mat-label class="radio-group-label">Promising Area : </mat-label>

                        <section class="example-section d-inline-block pl-4 "   >
                        <mat-radio-group formControlName="PromisingArea"  [disabled]="isReadonly">
                          <mat-radio-button [value]=true>Yes</mat-radio-button>
                          <mat-radio-button [value]=false>No</mat-radio-button>
                        </mat-radio-group>
                          <!-- <mat-checkbox  value="true">Yes</mat-checkbox>
                          <mat-checkbox  value="false">No</mat-checkbox> -->

                         </section>



                      </div>
                    </div>
                    <div class="d-inline-block w-50" >
                      <mat-form-field floatLabel="always" class="w-100" >
                        <mat-label>  </mat-label>

                        <textarea formControlName="notes" rows="4" [readonly]="isReadonly" matInput placeholder="write your Notes here">
                        </textarea>

                      </mat-form-field>
                      <label class="mt-5 note w-100">برجاء تحديد إن كانت المنطقة واعدة  توسعات أو عملاء جدد أو لا *</label>
                    </div>
                    </div>


                    </mat-grid-tile>

                  </mat-grid-list>
                  <mat-grid-list cols="2" rowHeight="205px" class="mx-3">
                    <mat-grid-tile>
                      <div class="controles-container">
                        <mat-label class="w-25">Name : </mat-label>
                        <mat-form-field  class="w-75">

                          <input matInput [readonly]="true" >
                          <mat-error>This field is mandatory in <strong>Arabic</strong>.</mat-error>

                        </mat-form-field>
                        <mat-label  class="w-25">Signature : </mat-label>
                        <mat-form-field  class="w-75">

                          <input  matInput [readonly]="true"  >
                          <mat-error>This field is mandatory in <strong>Arabic</strong>.</mat-error>
                        </mat-form-field>
                        <div id="hideStatusId">
                        <mat-label  class="w-25" *ngIf="hideflag">Status :</mat-label>
                        <mat-form-field  class="w-75" *ngIf="hideflag" >

                          <mat-select formControlName="statusId"   [disabled]="!adminflag0">
                            <mat-option>None</mat-option>
                            <ng-container *ngFor="let item of statusList">
                              <mat-option [value]="item.id">{{item.value}}</mat-option>
                            </ng-container>
                          </mat-select>
                        </mat-form-field>
                      </div>

                        </div>
                        </mat-grid-tile>
                        <mat-grid-tile>
                          <div class="controles-container">

                            <mat-form-field  class="w-75">

                              <input matInput [readonly]="true" >
                              <mat-error>This field is mandatory in <strong>Arabic</strong>.</mat-error>

                            </mat-form-field>
                            <mat-label class="w-25 text-right">   :الاسم    </mat-label>
                            <mat-form-field  class="w-75">

                              <input  matInput [readonly]="true"  >
                              <mat-error>This field is mandatory in <strong>Arabic</strong>.</mat-error>
                            </mat-form-field>
                            <mat-label  class="w-25 text-right"> : التوقيع   </mat-label>
                            <div id="hideStatusId0">
                              <mat-label  class="w-25" *ngIf="hideflag">Action :</mat-label>
                              <mat-form-field  class="w-75" *ngIf="hideflag">

                                <mat-select formControlName="acceptstatusId"   >
                                  <mat-option>None</mat-option>
                                  <ng-container *ngFor="let item of actionstatusList">
                                    <mat-option [value]="item.id">{{item.value}}</mat-option>
                                  </ng-container>
                                </mat-select>
                              </mat-form-field>
                            </div>


                            </div>
                            </mat-grid-tile>
                        </mat-grid-list>
                  </mat-card>
                  <mat-grid-list cols="1" rowHeight="50px">

                    <mat-grid-tile>
                      <div class="controles-container" id='SubmitId'>
                           <div class="text-right">
                             <button mat-button class="mr-1 bac" type="button" routerLink="../fiber">Back</button>

                           <button mat-button    class="sub" type="submit">Submit</button>
                            </div>

                          </div>
                          </mat-grid-tile>
                          </mat-grid-list>

                          <mat-grid-list cols="1" rowHeight="50px">

                            <mat-grid-tile>
                              <div class="controles-container text-center" >
                                <span class="address"> القرية الذكية ,الكيلو28, طريق القاهرة اسكندرية الصحراوي, الجيزة 12577, مصرB7  </span>
                                </div>
                                </mat-grid-tile>
                                </mat-grid-list>



    </form>
</mat-card>
</div>
  </mat-tab>
  <mat-tab label="Comments" *ngIf="param1" >
    <form [formGroup]="formComment" class="normal-form" (submit)="saveComment()">
      <div class="Comment w-50">
    <mat-form-field floatLabel="always" class="w-100">
      <mat-label>Comment</mat-label>
      <textarea matInput formControlName="comment" placeholder="write your comment here" rows="3"></textarea>
      <mat-error>This field is mandatory.</mat-error>
    </mat-form-field>

    <button mat-button class="sub subcoment " [disabled]="formComment.invalid" type="submit">Submit</button>
  </div>
  </form>
  <app-loader *ngIf="dataSource==null;else table"></app-loader>
  <ng-template #table>
  <div class="example-container mat-elevation-z8" #TABLE>
    <!-- <div class="mat-elevation-z8"> -->
      <mat-table [dataSource]="dataSourceComment" matSort #table>


    <!-- Name Column -->
    <ng-container matColumnDef="comment">
      <mat-header-cell *matHeaderCellDef mat-sort-header> {{'comments'  }} </mat-header-cell>

        <mat-cell *matCellDef="let element" title="{{element.comment}} " data-label="comment"> {{element.comment?.length>50?  (element.comment | slice:0:50 )+' ...' :element.comment }} </mat-cell>


    </ng-container>
    <ng-container matColumnDef="creationDate">
      <mat-header-cell *matHeaderCellDef mat-sort-header> {{'Creation date'   }}</mat-header-cell>
      <mat-cell *matCellDef="let element" data-label="Creation date"> {{element.creationDate| date:'medium'}} </mat-cell>
          </ng-container>

      <ng-container matColumnDef="createdBy">
       <mat-header-cell *matHeaderCellDef mat-sort-header> {{'Created by'  }} </mat-header-cell>
       <mat-cell *matCellDef="let element" data-label="Created by"> {{element.createdBy}}   </mat-cell>
        </ng-container>
        <ng-container matColumnDef="createdByTeam">
          <mat-header-cell *matHeaderCellDef mat-sort-header> {{'Created by team'  }}</mat-header-cell>
         <mat-cell *matCellDef="let element" data-label="Created by team"> {{element.createdByTeam}} </mat-cell>
         </ng-container>
    <ng-container matColumnDef="noData">
      <mat-footer-cell *matFooterCellDef colspan="1">
         No Data ...
      </mat-footer-cell>

  </ng-container>

  <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSourceComment.data.length==0 && dataSourceComment !=null)}"></mat-footer-row>
        <mat-header-row *matHeaderRowDef="displayedCommentColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedCommentColumns;">
        </mat-row>
      </mat-table>

      <mat-paginator  [pageSizeOptions]="[30, 50, 100]"   [pageSize]="30" ></mat-paginator>

    </div>
  </ng-template>
     </mat-tab>
  <mat-tab label="File Upload" *ngIf="param1" >

    <div class="mb-4" >
      <div  class="import-excel d-inline-block">
          <div class="input-group">
              <label  class="btn browse">
                  <input class="file-upload-input"  #fileInput   name="file" type="file" for="browse" (change)="uploadFileEvt($event)">
             Browse
                 </label>
              <input class="form-control rounded-0" placeholder="Choose File..." [(ngModel)]="fileAttr" type="text"  id="browse">
          </div>

          <!-- <p class="help-block" style="display:block;">
          <small>error msg.</small></p> -->

      </div>
      <span  class="input-group-btn d-inline-block">
          <label  class="btn  file-upload-btn" matTooltip="Upload">
              <input class="file-upload-input" type="button" (click)="Upload()" >
          <mat-icon>upload</mat-icon>
             </label>
         </span>
         </div>


         <app-loader *ngIf="dataSource==null;else table"></app-loader>
         <ng-template #table>
         <div class="example-container mat-elevation-z8" #TABLE>
          <!-- <div class="mat-elevation-z8"> -->
            <mat-table [dataSource]="dataSource" matSort #table>


          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef  > {{'name'  }} </mat-header-cell>
            <mat-cell *matCellDef="let element" data-label="Value"> {{element.name}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Download">
            <mat-header-cell *matHeaderCellDef> {{'Download'}}</mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="Download">
                <button mat-button class="text-success font-weight-bolder" matTooltip="download"   (click)="onDownLoad(row)">
                    <mat-icon>download</mat-icon>
                </button>

            </mat-cell>

        </ng-container>
        <ng-container matColumnDef="creationDate">
          <mat-header-cell *matHeaderCellDef  > {{'Creation date'   }}</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="Creation date"> {{element.creationDate| date:'medium'}} </mat-cell>
              </ng-container>

          <ng-container matColumnDef="createdBy">
           <mat-header-cell *matHeaderCellDef  > {{'Created by'  }} </mat-header-cell>
           <mat-cell *matCellDef="let element" data-label="Created by"> {{element.createdBy}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="createdByTeam">
              <mat-header-cell *matHeaderCellDef  > {{'Created by team'  }}</mat-header-cell>
             <mat-cell *matCellDef="let element" data-label="Created by team"> {{element.createdByTeam}} </mat-cell>
             </ng-container>
        <ng-container matColumnDef="noData">
          <mat-footer-cell *matFooterCellDef colspan="2">
             No Data ...
          </mat-footer-cell>

      </ng-container>

      <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource.data.length==0 && dataSource !=null)}"></mat-footer-row>

              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;">
              </mat-row>
            </mat-table>
          <!-- </ng-template> -->
            <mat-paginator  [pageSizeOptions]="[30, 50, 100]"   [pageSize]="30" ></mat-paginator>

          </div>
</ng-template>
  </mat-tab>
</mat-tab-group>


<app-loader *ngIf="loading"></app-loader>




<!--
   <div class="add-bottom-padding">
            <label class="radio-group-label" style="width:130px">Promising Area : </label>
            <mat-radio-group formControlName="PromisingArea" >
              <mat-radio-button [value]=true>Yes</mat-radio-button>
              <mat-radio-button [value]=false>No</mat-radio-button>
            </mat-radio-group>


          </div>



          <label class="mt-3 note">برجاء تحديد إن كانت المنطقة واعدة (توسعات أو عملاء جدد)  أو لا *</label>
 -->
